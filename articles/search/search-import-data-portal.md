<properties
	pageTitle="Azure ポータルでインデクサーを使用して Azure Search にデータをインポートする | Microsoft Azure | ホステッド クラウド検索サービス"
	description="Azure Portal で Azure Search のデータのインポート ウィザードを使用して、Azure VM 上の Azure Blob Storage、Table Storage、SQL Database、SQL Server のデータをクロールします。"
	services="search"
	documentationCenter=""
	authors="HeidiSteen"
	manager="jhubbard"
	editor=""
    tags="Azure Portal"/>

<tags
	ms.service="search"
	ms.devlang="na"
	ms.workload="search"
	ms.topic="get-started-article"
	ms.tgt_pltfrm="na"
	ms.date="08/29/2016"
	ms.author="heidist"/>

# ポータルを使用した Azure Search へのデータのインポート

Azure Portal では、データをインデックスに読み込む**データのインポート** ウィザードが Azure Search ダッシュボードに用意されています。

  ![Import Data on the command bar][1]

内部的には、このウィザードが "*インデクサー*" を構成して起動し、次のようなインデックス作成プロセスのいくつかの手順を自動化します。

- 現在の Azure サブスクリプションで外部のデータ ソースに接続する
- ソースのデータ構造に基づいてインデックス スキーマを自動生成する
- データ ソースから取得した行セットに基づいてドキュメントを作成する
- Search サービス内のインデックスにドキュメントをアップロードする

DocumentDB のサンプル データを使用して、このワークフローを試してみることができます。手順については、[Azure Portal での Azure Search の使用](search-get-started-portal.md)に関するページを参照してください。

## データのインポート ウィザードでサポートされるデータ ソース

データのインポート ウィザードでは、次のデータ ソースがサポートされています。

- Azure SQL Database
- Azure VM 上の SQL Server のリレーショナル データ
- Azure DocumentDB
- Azure Blob Storage (プレビュー段階)
- Azure Table Storage (プレビュー段階)

フラット化されたデータセットの入力が必要です。データは 1 つのテーブル、データベース ビュー、または同等のデータ構造からのみインポートできます。ウィザードを実行する前に、このデータ構造を作成する必要があります。

インデクサーのいくつかはまだプレビュー段階です。つまり、インデクサーの定義は API のプレビュー バージョンでサポートされます。詳細情報とリンクについては、[インデクサーの概要](search-indexer-overview.md)に関するページを参照してください。

## データへの接続

1. [Azure Portal](https://portal.azure.com) にサインインし、サービス ダッシュボードを開きます。ジャンプ バーの **[Search サービス]** をクリックすると、現在のサブスクリプションの既存のサービスを表示できます。

2. コマンド バーの **[データのインポート]** をクリックして、[データのインポート] ブレードを開きます。

3. **[データに接続します]** をクリックし、インデクサーで使用されるデータ ソースの定義を指定します。サブスクリプション内のデータ ソースの場合、ウィザードは通常、接続情報を検出して読み取ることができ、全体的な構成要件を最小限に抑えます。

| | |
|--------|------------|
|**既存のデータ ソース** | Search サービスに定義済みのインデクサーが既にある場合は、別のインポート用に既存のデータ ソース定義を選択できます。|
|**Azure SQL Database** | サービス名、読み取り権限を持つデータベース ユーザーの資格情報、データベース名は、このページで、または ADO.NET 接続文字列を使用して指定できます。接続文字列のオプションを選択して、プロパティを表示またはカスタマイズします。<br/><br/>行セットを提供するテーブルまたはビューは、このページで指定する必要があります。このオプションは接続に成功すると表示され、ドロップダウン リストから選択できます。|
|**Azure VM 上の SQL Server** | 接続文字列として、完全修飾サービス名、ユーザー ID とパスワード、データベースを指定します。このデータ ソースを使用するには、接続を暗号化する証明書をローカル ストアにあらかじめインストールしておく必要があります。<br/><br/>行セットを提供するテーブルまたはビューは、このページで指定する必要があります。このオプションは接続に成功すると表示され、ドロップダウン リストから選択できます。
|**DocumentDB** |要件には、アカウント、データベース、コレクションが含まれます。コレクション内のすべてのドキュメントはインデックスに含まれます。クエリを定義して、行セットをフラット化またはフィルター処理したり、以降のデータ更新操作のためにドキュメントの変更を検出したりできます。|
|**Azure Blob Storage** | 要件には、ストレージ アカウントとコンテナーが含まれます。BLOB 名がグループ化のために仮想名前付け規則に従っている場合は、必要に応じて、コンテナーの下のフォルダーとして名前の仮想ディレクトリの部分を指定できます。詳細については、[Blob Storage (プレビュー) のインデックス作成](search-howto-indexing-azure-blob-storage.md)に関するページを参照してください。 |
|**Azure Table Storage** | 要件には、ストレージ アカウントとテーブル名が含まれます。必要に応じて、クエリを指定してテーブルのサブセットを取得できます。詳細については、[Table Storage (プレビュー) のインデックス作成](search-howto-indexing-azure-tables.md)に関するページを参照してください。 |

## ターゲット インデックスのカスタマイズ

通常、インデックスは事前にデータセットから推測されます。フィールドを追加、編集、削除してスキーマを完成させることができます。さらに、フィールド レベルで属性を設定して、以降の検索動作を決定します。

1. **[対象インデックスをカスタマイズします]** で、各ドキュメントを一意に識別するために使用する名前と**キー**を指定します。キーは文字列である必要があります。フィールドの値に空白またはダッシュが含まれる場合は、**[データのインポート]** の詳細オプションでこれらの文字の検証チェックを抑制するように設定してください。

2. 残りのフィールドを確認して修正します。通常、フィールドの名前と型は既に設定されています。データ型は変更できます。

3. 各フィールドのインデックスの属性を設定します。

 - Retrievable は、検索結果にフィールドを返します。
 - Filterable は、フィルター式でフィールドを参照できるようにします。
 - Sortable は、並べ替えでフィールドを使用できるようにします。
 - Facetable は、ファセット ナビゲーションにフィールドを使用できるようにします。
 - Searchable は、全文検索を実行できるようにします。
  
4. フィールド レベルで言語アナライザーを指定する場合は、**[アナライザー]** タブをクリックします。現時点では、言語アナライザーのみを指定できます。カスタム アナライザーや、キーワード、パターンなどの非言語アナライザーを使用する場合は、コードが必要になります。

 - **[検索可能]** をクリックしてフィールドにフルテキスト検索を指定し、アナライザーのドロップダウン リストを有効にします。
 - 使用するアナライザーを選択します。詳細については、[複数の言語によるドキュメントのインデックスの作成](search-language-support.md)に関するページを参照してください。

5. **[提案者]** をクリックして、選択したフィールドに先行入力クエリによる検索候補を有効にします。


## データのインポート

1. **[データのインポート]** で、インデクサーの名前を指定します。データのインポート ウィザードの成果物がインデクサーであることを思い出してください。後でインデクサーの確認や編集を行う場合は、ウィザードを再実行するのではなく、ポータルから選択します。

2. サービスがプロビジョニングされている地域のタイム ゾーンに基づいて、スケジュールを指定します。

3. 詳細オプションを設定して、ドキュメントが削除された場合にインデックス作成を継続できるかどうかを決めるしきい値を指定します。また、**[キー]** フィールドにスペースやスラッシュを含めることができるかどうかも指定できます。

## 既存のインデクサーを編集する

サービス ダッシュボードで [インデクサー] タイルをダブルクリックすると、サブスクリプションに作成されたすべてのインデクサーの一覧が表示されます。インデクサーのいずれかをダブルクリックして、実行、編集、削除できます。インデックスを既存の別のインデックスに置き換える、データ ソースを変更する、およびインデックス作成時のエラーのしきい値のオプションを設定することができます。

## 既存のインデックスを編集する

Azure Search では、インデックスの構造を更新するには、そのインデックスを再構築する必要があります。再構築するには、インデックスを削除し、インデックスを再作成して、データを再読み込みします。構造の更新には、データ型の変更、フィールド名の変更、フィールドの削除があります。

再構築する必要のない編集には、新しいフィールドの追加、スコアリング プロファイルの変更、サジェスターの変更、言語アナライザーの変更があります。詳細については、[インデックスの更新](https://msdn.microsoft.com/library/azure/dn800964.aspx)に関するページを参照してください。

## 次のステップ

インデクサーの詳細については、次のリンク先を参照してください。

- [Azure SQL Database のインデックス作成](search-howto-connecting-azure-sql-database-to-azure-search-using-indexers-2015-02-28.md)
- [DocumentDB のインデックス作成](../documentdb/documentdb-search-indexer.md)
- [Blob Storage (プレビュー) のインデックス作成](search-howto-indexing-azure-blob-storage.md)
- [Table Storage (プレビュー) のインデックス作成](search-howto-indexing-azure-tables.md)



<!--Image references-->
[1]: ./media/search-import-data-portal/search-import-data-command.png

<!---HONumber=AcomDC_0928_2016-->