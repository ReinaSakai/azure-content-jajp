<properties
   pageTitle="StorSimple ボリュームの管理 (U2) | Microsoft Azure"
   description="StorSimple ボリュームを追加、変更、監視、削除する方法と、必要に応じて StorSimple ボリュームをオフラインにする方法について説明します。"
   services="storsimple"
   documentationCenter="NA"
   authors="alkohli"
   manager="carmonm"
   editor="" />
<tags 
   ms.service="storsimple"
   ms.devlang="NA"
   ms.topic="article"
   ms.tgt_pltfrm="NA"
   ms.workload="NA"
   ms.date="09/21/2016"
   ms.author="alkohli" />

# StorSimple Manager サービスを使用してボリュームを管理する (Update 2)

[AZURE.INCLUDE [storsimple-version-selector-manage-volumes](../../includes/storsimple-version-selector-manage-volumes.md)]

## Overview

このチュートリアルでは、StorSimple Manager サービスを使用して、Update 2 がインストールされている StorSimple デバイスおよび StorSimple 仮想デバイスにボリュームを作成して管理する方法について説明します。

StorSimple Manager サービスは、StorSimple ソリューションを単一の Web インターフェイスから管理できる、Azure クラシック ポータルの拡張機能です。StorSimple Manager サービスを使用すると、ボリュームの管理に加え、StorSimple サービスの作成と管理、デバイスの表示と管理、アラートの表示、バックアップ ポリシーやバックアップ カタログの表示と管理を行うことができます。

## ボリュームの種類

StorSimple ボリュームは、次のいずれかです。

- **ローカル固定ボリューム**: これらのボリュームのデータは、常にローカル StorSimple デバイスに残ります。
- **階層化ボリューム**: これらのボリュームのデータは、クラウドにあふれる場合があります。

アーカイブ ボリュームは、階層化ボリュームの一種です。アーカイブ ボリュームでより大きな重複除去チャンク サイズを使用すると、デバイスはより大きなデータのセグメントをクラウドに転送できます。

必要であれば、ボリュームの種類をローカルから階層化に、または階層化からローカルに変更できます。詳細については、「[ボリュームの種類を変更する](#change-the-volume-type)」を参照してください。

### ローカル固定ボリューム

ローカル固定ボリュームは、クラウドにデータを積み重ねない、完全にプロビジョニングされたボリュームです。そのため、クラウド接続に関係なく、プライマリ データがローカルに保証されます。ローカル固定ボリュームのデータは、重複除去や圧縮が行われません。ただし、ローカル固定ボリュームのスナップショットは重複除去されます。

ローカル固定ボリュームは、完全にプロビジョニングされます。そのため、ボリュームを作成するときに、デバイスに十分な領域が必要です。プロビジョニングできるローカル固定ボリュームの最大サイズは、StorSimple 8100 デバイスで 8 TB、8600 デバイスで 20 TB です。StorSimple では、デバイスの残りのローカル領域が、スナップショット、メタデータ、およびデータ処理用に予約されます。ローカル固定ボリュームのサイズを、使用可能な最大領域のサイズまで拡大することもできますが、一度作成すると、ボリュームのサイズを縮小することはできません。

ローカル固定ボリュームを作成すると、階層化ボリュームの作成に使用可能な領域が減少します。その逆の場合もあります。階層化ボリュームが既にある場合、ローカル固定ボリュームの作成に使用可能な領域は、上記の上限よりも低くなります。ローカル ボリュームの詳細については、[ローカル固定ボリュームに関してよく寄せられる質問](storsimple-local-volume-faq.md)のページをご覧ください。

### 階層化ボリューム

階層化ボリュームは、シン プロビジョニングされたボリュームです。頻繁にアクセスされるデータはデバイスのローカルに保持され、使用頻度の低いデータは自動的にクラウドに置かれます。仮想プロビジョニングは、物理リソースを超える空き容量がストレージにあるように見える仮想化テクノロジです。StorSimple では、事前に十分なストレージを確保するのではなく、仮想プロビジョニングを使用して、現在の要件を満たすために必要な容量のみを割り当てます。クラウド ストレージの柔軟な性質がこの手法を容易にし、StorSimple は変化する需要に合わせてクラウド ストレージを増減できます。

階層化ボリュームをアーカイブ データに使用する場合は、**[アクセス頻度の低いアーカイブ データにこのボリュームを使用します]** チェック ボックスをオンにすると、ボリュームの重複除去チャンク サイズが 512 KB に変更されます。このオプションをオフにすると、対応する階層化されたボリュームに 64 KB のチャンク サイズが使用されます。より大きな重複除去のチャンク サイズを使用すると、デバイスはより大きなアーカイブ データをクラウドに転送できるようになります。

>[AZURE.NOTE] Update 2 より前のバージョンの StorSimple で作成されたアーカイブ ボリュームは、アーカイブのチェック ボックスをオンにした状態で階層化としてインポートされます。

### プロビジョニング容量

デバイスとボリュームの種類ごとの最大プロビジョニング容量については、次の表を参照してください(仮想デバイスではローカル固定ボリュームを使用できない点に注意してください)。

| | 階層化ボリュームの最大サイズ | ローカル固定ボリュームの最大サイズ |
|-------------|----------------------------|------------------------------------|
| **物理デバイス** | | |
| 8100 | 64 TB | 8 TB |
| 8600 | 64 TB | 20 TB |
| **仮想デバイス** | | |
| 8010 | 30 TB | 該当なし |
| 8020 | 64 TB | 該当なし |

## [ボリューム] ページ

**[ボリューム]** ページでは、イニシエーター (サーバー) 用に Microsoft Azure StorSimple デバイスにプロビジョニングされているストレージ ボリュームを管理することができます。このページには、StorSimple デバイス上のボリュームの一覧が表示されます。

 ![[ボリューム] ページ](./media/storsimple-manage-volumes-u2/VolumePage.png)

ボリュームは、次の一連の属性で構成されます。

- **[ボリューム名]** - ボリュームを識別するのに役立つ、わかりやすい一意の名前。この名前は、特定のボリュームをフィルター処理する場合に監視レポートにも使用されます。

- **[状態]** - オンラインまたはオフラインにすることができます。ボリュームがオフラインの場合、ボリュームにアクセスして使用することが許可されているイニシエーター (サーバー) はこのボリュームを認識できません。

- **[容量]** - イニシエーター (サーバー) によって格納できるデータの合計量を指定します。ローカル固定ボリュームは、完全にプロビジョニングされ、StorSimple デバイス上に置かれます。階層化ボリュームはシン プロビジョニングされ、データは重複除去されます。シン プロビジョニングされたボリュームでは、デバイスが、構成済みのボリューム容量に従って物理ストレージ容量を内部またはクラウドに事前割り当てすることがありません。ボリュームの容量は、要求に応じて割り当てられ、使用されます。

- **[種類]** – ボリュームが**階層化** (既定) であるか**ローカル固定**であるかを示します。

- **[バックアップ]** – ボリュームに既定のバックアップ ポリシーが存在するかどうかを示します。

- **[アクセス]** - このボリュームへのアクセスを許可するイニシエーター (サーバー) を指定します。ボリュームに関連付けられているアクセス制御レコード (ACR) のメンバーではないイニシエーターは、このボリュームを認識できません。

- **[監視]** - ボリュームを監視するかどうかを指定します。ボリュームは、作成されると既定で監視が有効になります。ただし、ボリュームの複製に対する監視は無効になります。ボリュームの監視を有効にするには、「[ボリュームを監視する](#monitor-a-volume)」の手順に従います。

以下のタスクを実行するには、このチュートリアルの手順に従います。

- ボリュームを追加する
- ボリュームを変更する
- ボリュームの種類を変更する
- ボリュームを削除する
- ボリュームをオフラインにする
- ボリュームを監視する

## ボリュームを追加する

[ボリュームの作成](storsimple-deployment-walkthrough-u2.md#step-6-create-a-volume)は、StorSimple ソリューションのデプロイメント時に完了しています。ボリュームを追加するには、同様の手順を実行します。

#### ボリュームを追加するには

1. **[デバイス]** ページで、デバイスを選択し、ダブルクリックします。次に、**[ボリューム コンテナー]** タブをクリックします。

2. 一覧でボリューム コンテナーを選択し、それをダブルクリックして、コンテナーに関連付けられているボリュームにアクセスします。

3. ページの下部にある **[追加]** をクリックします。ボリュームの追加ウィザードが起動されます。

     ![ボリュームの追加ウィザードの基本設定](./media/storsimple-manage-volumes-u2/TieredVolEx.png)

4. ボリュームの追加ウィザードの **[基本設定]** で、次の操作を行います。

  1. **[名前]** に、ボリュームの名前を指定します。
  2. ドロップダウン リストで **[使用法の種類]** を選択します。常にデバイスのローカルでデータを使用できるようにする必要があるワークロードの場合は、**[ローカル固定]** を選択します。それ以外のデータの場合は、**[階層化]** を選択します(**[階層化]** は既定値です)。
  3. 手順 2. で **[階層化]** を選択した場合は、アーカイブ ボリュームを構成するために、**[アクセス頻度の低いアーカイブ データにこのボリュームを使用します]** チェック ボックスをオンにすることができます。
  4. **[プロビジョニング容量]** に、ボリュームのプロビジョニング容量を GB または TB 単位で入力します。デバイスとボリュームの種類ごとの最大サイズについては、「[プロビジョニング容量](#provisioned-capacity)」を参照してください。デバイスで実際に使用できる記憶域の容量を判断するには、**[利用可能な容量]** を確認します。

5. 矢印アイコン ![矢印アイコン](./media/storsimple-manage-volumes-u2/HCS_ArrowIcon.png) をクリックします。ローカル固定ボリュームを構成している場合は、次のメッセージが表示されます。

    ![ボリュームのメッセージ型の変更](./media/storsimple-manage-volumes-u2/LocalVolEx.png)
   
5. 矢印アイコン ![矢印アイコン](./media/storsimple-manage-volumes-u2/HCS_ArrowIcon.png) を再度クリックして、**[追加設定]** ページに移動します。

    ![ボリュームの追加ウィザードの追加設定](./media/storsimple-manage-volumes-u2/AddVolume2.png)<br>

6. **[追加設定]** で、新しいアクセス制御レコード (ACR) を追加します。
  
  1. ボックスの一覧で、アクセス制御レコード (ACR) を選択します。また、新しい ACR を追加することもできます。ACR は、ホストの IQN をレコードに記載されている IQN と照合することによって、ボリュームにアクセスできるホストを判定します。ACR を指定しない場合は、次のメッセージが表示されます。

        ![Specify ACR](./media/storsimple-manage-volumes-u2/SpecifyACR.png)

  2. **[このボリュームの既定のバックアップの有効化]** チェック ボックスをオンにすることをお勧めします。
  3. チェック マーク アイコン ![チェック マーク アイコン](./media/storsimple-manage-volumes-u2/HCS_CheckIcon.png) をクリックして、指定した設定でボリュームを作成します。

新しいボリュームが使用できるようになります。

>[AZURE.NOTE] ローカル固定ボリュームを作成した後、すぐに別のローカル固定ボリュームを作成した場合、ボリューム作成ジョブは連続して実行されます。最初のボリューム作成ジョブが完了してからでないと、次のボリューム作成ジョブは開始できません。

## ボリュームを変更する

ボリュームを拡張する必要がある場合やボリュームにアクセスするホストを変更する必要がある場合は、ボリュームを変更します。

> [AZURE.IMPORTANT] 
>
> - デバイス上のボリューム サイズを変更した場合、ホスト上のボリュームのサイズも変更する必要があります。
> - ここで説明されているホスト側の手順は、Windows Server 2012 (2012R2) 向けです。Linux などの他のホスト オペレーティング システムでは、手続きが異なります。別のオペレーティング システムで稼働しているホスト上のボリュームを変更する場合は、お使いのホスト オペレーティング システムの指示を参照してください。

#### ボリュームを変更するには

1. **[デバイス]** ページで、デバイスを選択し、ダブルクリックします。次に、**[ボリューム コンテナー]** タブをクリックします。

2. 一覧でボリューム コンテナーを選択し、それをダブルクリックして、コンテナーに関連付けられているボリュームを表示します。

3. ボリュームを選択し、ページの下部にある **[変更]** をクリックします。ボリュームの変更ウィザードが起動します。

4. ボリュームの変更ウィザードの **[基本設定]** では、次の操作を実行できます。

  - **[名前]** を編集します。
  - **[使用法の種類]** をローカル固定から階層化に、または階層化からローカル固定に変換します (詳細については、「[ボリュームの種類を変更する](#change-the-volume-type)」を参照してください)。
  - **プロビジョニング容量**を増やす。**プロビジョニング容量**は、増やすことしかできません。ボリュームを作成した後で小さくすることはできません。

5. ボリュームがオフラインになっていれば、**[追加設定]** の下で ACR を変更することができます。ボリュームがオンラインの場合は、最初にボリュームをオフラインにする必要があります。ACR を変更する前に、「[ボリュームをオフラインにする](#take-a-volume-offline)」の手順を参照してください。

    > [AZURE.NOTE] ボリュームの**既定のバックアップを有効にする**オプションは変更できません。

6. チェック マーク アイコン ![チェック マーク アイコン](./media/storsimple-manage-volumes-u2/HCS_CheckIcon.png) をクリックして変更を保存します。ボリュームを更新中であることを示すメッセージが Azure クラシック ポータルに表示されます。ボリュームが正常に更新されると、成功メッセージが表示されます。

7. ボリュームを拡張する場合は、Windows ホスト コンピューターで次の手順を実行します。

   1. **[コンピューターの管理]**、**[ディスクの管理]** の順に移動します。
   2. **[ディスクの管理]** を右クリックし、**[ディスクの再スキャン]** を選択します。
   3. ディスクの一覧で、更新したボリュームを選択して右クリックし、**[ボリュームの拡張]** を選択します。ボリューム拡張ウィザードが起動します。**[次へ]** をクリックします。
   4. 既定の値を使用してウィザードを完了します。ウィザードが終了すると、サイズが増えたボリュームが表示されます。

    >[AZURE.NOTE] ローカル固定ボリュームを拡張した後、すぐに別のローカル固定ボリュームを拡張した場合、ボリューム拡張ジョブは連続して実行されます。最初のボリューム拡張ジョブが完了してからでないと、次のボリューム拡張ジョブは開始できません。

![ビデオ](./media/storsimple-manage-volumes-u2/Video_icon.png) **ビデオ**

ボリュームを展開する方法を説明したビデオについては、[こちら](https://azure.microsoft.com/documentation/videos/expand-a-storsimple-volume/)を参照してください。

## ボリュームの種類を変更する

ボリュームの種類を、階層化からローカル固定に、またはローカル固定から階層化に変更することができます。ただし、この変換を頻繁に行うべきではありません。ボリュームを階層化からローカル固定に変換する理由には、次のようなものがあります。

- データの可用性とパフォーマンスに関するローカルな保証
- クラウドの待機時間やクラウドの接続の問題の回避

通常、これらは頻繁にアクセスする既存の小さいボリュームです。ローカル固定ボリュームは、作成時に完全にプロビジョニングされます。階層化ボリュームをローカル固定ボリュームに変換する場合、StorSimple は変換を開始する前に、十分な領域がデバイスにあることを確認します。領域が不足している場合は、エラーが表示され、操作は取り消されます。

> [AZURE.NOTE] 階層化からローカル固定への変換を開始する前に、他のワークロードの領域の要件も検討してください。

他のボリュームをプロビジョニングするために追加の領域が必要になった場合に、ローカル固定ボリュームを階層化ボリュームに変更することがあります。ローカル固定ボリュームを階層化ボリュームに変換する場合、デバイスの利用可能な容量は、解放された容量のサイズの分だけ増加します。接続の問題で、ローカル型から階層化型へのボリュームの変換ができない場合、ローカル ボリュームは変換が完了するまで、階層化ボリュームのプロパティを表示します。これは、一部のデータがクラウドにあふれた可能性があるためです。このあふれたデータは、デバイスのローカル領域を占有し続け、操作が再開されて完了するまで解放できません。

>[AZURE.NOTE] ボリュームの変換には時間がかかる場合があり、開始後は取り消すことができません。変換中、ボリュームはオンラインのままであり、バックアップは実行できますが、変換の実行中にボリュームを拡張したり復元したりすることはできません。

階層化ボリュームからローカル固定ボリュームへの変換は、デバイスのパフォーマンスを低下させる可能性があります。さらに、次の要因によって変換が完了するまでの時間が長くなることがあります。

- 十分な帯域幅がない。

- 最新のバックアップがない。

これらの要因による影響を最小限に抑えるには、以下を行います。

- 帯域幅スロットル ポリシーを見直し、専用の 40 Mbps の帯域幅が使用可能であることを確認する。
- ピーク外の時間帯に変換をスケジュールする。
- 変換を開始する前に、クラウドのスナップショットを作成する。

(さまざまなワークロードをサポートする) 複数のボリュームを変換する場合は、優先順位の高いボリュームから変換されるように、ボリュームの変換に優先順位を付けます。たとえば、ファイル共有ワークロードをサポートするボリュームを変換する前に、仮想マシン (VM) をホストするボリュームまたは SQL ワークロードをサポートするボリュームを変換します。

#### ボリュームの種類を変更するには

1. **[デバイス]** ページで、デバイスを選択し、ダブルクリックします。次に、**[ボリューム コンテナー]** タブをクリックします。

2. 一覧でボリューム コンテナーを選択し、それをダブルクリックして、コンテナーに関連付けられているボリュームを表示します。

3. ボリュームを選択し、ページの下部にある **[変更]** をクリックします。ボリュームの変更ウィザードが起動します。

4. **[基本設定]** ページの **[使用法の種類]** ボックスの一覧で新しい種類を選択して、使用法の種類を変更します。

    - 種類を **[ローカル固定]** に変更する場合は、十分な容量があるかどうかを StorSimple が確認します。
    - 種類を **[階層化]** に変更し、このボリュームをアーカイブ データ用に使用する場合は、**[アクセス頻度の低いアーカイブ データにこのボリュームを使用します]** チェック ボックスをオンにします。

        ![[アーカイブ] チェックボックス](./media/storsimple-manage-volumes-u2/ModifyTieredVolEx.png)

5. **[追加設定]** ページに移動するには、矢印アイコン ![矢印アイコン](./media/storsimple-manage-volumes-u2/HCS_ArrowIcon.png) をクリックしてください。ローカル固定ボリュームを構成している場合は、次のメッセージが表示されます。

    ![ボリュームのメッセージ型の変更](./media/storsimple-manage-volumes-u2/ModifyLocalVolEx.png)

6. もう一度矢印アイコン ![矢印アイコン](./media/storsimple-manage-volumes-u2/HCS_ArrowIcon.png) をクリックして続行します。

7. チェック アイコン ![チェック マーク アイコン](./media/storsimple-manage-volumes-u2/HCS_CheckIcon.png) をクリックして、変換プロセスを開始します。ボリュームを更新中であることを示すメッセージが Azure ポータルに表示されます。ボリュームが正常に更新されると、成功メッセージが表示されます。

## ボリュームをオフラインにする

ボリュームを変更または削除する場合は、ボリュームをオフラインにすることが必要になる場合があります。ボリュームがオフラインのときは、ボリュームに対して読み取り/書き込みアクセスを行うことはできません。デバイス上だけでなく、ホスト上のボリュームもオフラインにする必要があります。

#### ボリュームをオフラインにするには

1. ボリュームをオフラインにする前に、対象のボリュームが使用されていないことを確認します。

2. 最初に、ホスト上でボリュームをオフラインにします。これにより、ボリューム上のデータが破損するリスクを排除できます。具体的な手順については、ホストのオペレーティング システムの説明を参照してください。

3. ホストがオフラインになったら、次の手順を実行して、デバイス上のボリュームをオフラインにします。

  1. **[デバイス]** ページで、デバイスを選択し、ダブルクリックします。次に、**[ボリューム コンテナー]** タブをクリックします。**[ボリューム コンテナー]** タブには、デバイスに関連付けられているすべてのボリューム コンテナーが表形式で表示されます。
  2. ボリューム コンテナーを選択し、クリックしてそのコンテナー内のすべてのボリュームを一覧表示します。
  3. ボリュームを選択し、**[オフラインにする]** をクリックします。
  4. 確認を求められたら、**[はい]** をクリックします。ボリュームがオフラインになります。

    ボリュームがオフラインになると、**[オンラインにする]** オプションが使用可能になります。

> [AZURE.NOTE] **[オフラインにする]** コマンドは、ボリュームをオフラインにする要求をデバイスに送信します。ホストがボリュームを使用しているときにこのコマンドを実行すると、接続が切断されますが、ボリュームをオフラインにする操作は失敗しません。

## ボリュームを削除する

> [AZURE.IMPORTANT] ボリュームは、オフラインのときに限り削除することができます。

ボリュームを削除するには、次の手順を実行します。

#### ボリュームを削除するには

1. **[デバイス]** ページで、デバイスを選択し、ダブルクリックします。次に、**[ボリューム コンテナー]** タブをクリックします。

2. 削除するボリュームが含まれているボリューム コンテナーを選択します。ボリューム コンテナーをクリックして **[ボリューム]** ページにアクセスします。

3. このコンテナーに関連付けられているすべてのボリュームが表形式で表示されます。削除するボリュームの状態を確認します。削除するボリュームがオフラインでない場合は、最初に 「[ボリュームをオフラインにする](#take-a-volume-offline)」の手順に従ってボリュームをオフラインにします。

4. ボリュームがオフラインになったら、ページ下部にある **[削除]** をクリックします。

5. 確認を求められたら、**[はい]** をクリックします。ボリュームが削除されます。**[ボリューム]** ページに、コンテナー内のボリュームの更新された一覧が表示されます。

    >[AZURE.NOTE] ローカル固定ボリュームを削除する場合、新しいボリュームで使用可能な領域がすぐに更新されない可能性があります。StorSimple Manager サービスは、ローカルで使用可能な領域を定期的に更新します。新しいボリュームを作成するときは、その前に数分待つことをお勧めします。<br> また、ローカル固定ボリュームを削除した後、すぐに別のローカル固定ボリュームを削除した場合、ボリューム削除ジョブは連続して実行されます。最初のボリューム削除ジョブが完了してからでないと、次のボリューム削除ジョブは開始できません。
 
## ボリュームを監視する

ボリュームの監視機能を使用すると、ボリュームの I/O に関連する統計情報を収集できます。既定では、最初に作成される 32 個のボリュームに対して監視が有効に設定されます。追加のボリュームに対しては、監視は既定で無効に設定されます。また、複製されたボリュームの監視も既定で無効に設定されます。

ボリュームの監視を有効または無効にするには、次の手順を実行します。

#### ボリュームの監視を有効または無効にするには

1. **[デバイス]** ページで、デバイスを選択し、ダブルクリックします。次に、**[ボリューム コンテナー]** タブをクリックします。

2. ボリュームが含まれているボリューム コンテナーを選択し、ボリューム コンテナーをクリックして **[ボリューム]** ページにアクセスします。

3. このコンテナーに関連付けられているすべてのボリュームが表形式で表示されます。ボリュームまたはボリュームの複製をクリックして選択します。

4. ページの下部にある **[変更]** をクリックします。

5. ボリュームの変更ウィザードの **[基本設定]** で、**[監視]** ボックスの一覧の **[有効]** または **[無効]** を選択します。

## 次のステップ

- [StorSimple ボリュームを複製する](storsimple-clone-volume.md)方法について説明します。

- [StorSimple Manager サービスを使用した StorSimple デバイスの管理方法](storsimple-manager-service-administration.md)

 

<!---HONumber=AcomDC_0921_2016-->