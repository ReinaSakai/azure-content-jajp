<properties
	pageTitle="Import/Export を使用した Blob Storage へのデータの転送 | Microsoft Azure"
	description="Azure クラシック ポータルでインポート/エクスポート ジョブを作成し、データを BLOB ストレージに転送する方法について説明します。"
	authors="renashahmsft"
	manager="aungoo"
	editor="tysonn"
	services="storage"
	documentationCenter=""/>

<tags
	ms.service="storage"
	ms.workload="storage"
	ms.tgt_pltfrm="na"
	ms.devlang="na"
	ms.topic="article"
	ms.date="09/21/2016"
	ms.author="renash;robinsh"/>


# Microsoft Azure Import/Export サービスを使用した Blob Storage へのデータの転送

## Overview

Azure Import/Export サービスを使用すると、ハード ディスク ドライブを Azure データ センターに送付することで、大量のデータを Azure BLOB ストレージに安全に転送できます。また、このサービスを使用して、Azure BLOB ストレージのデータをハード ディスク ドライブに転送し、それらのドライブをオンプレミスのサイトに返送することもできます。このサービスは、Azure との間で数テラバイトのデータを転送する必要があるときに、帯域幅が制限されていたり、ネットワーク コストがかかったりするために、ネットワーク経由でのアップロードまたはダウンロードが実現不可能である場合に適しています。

Azure Import/Export サービスを使用するには、ハード ディスク ドライブを BitLocker で暗号化してデータのセキュリティを確保する必要があります。このサービスでは、パブリック Azure のすべてのリージョンに存在するクラシック ストレージ アカウントをサポートします。ハード ディスク ドライブは、この記事で後述するサポートされているいずれかの場所に送付する必要があります。

この記事では、Azure Import/Export サービスの詳細と、Azure BLOB ストレージとの間でデータをコピーするためにドライブを送付する方法について説明します。

> [AZURE.IMPORTANT] クラシック ポータルまたは [Import/Export サービス REST API](http://go.microsoft.com/fwlink/?LinkID=329099) を使用して、クラシック ストレージのインポート/エクスポート ジョブを作成および管理できます。現在、Resource Manager のストレージ アカウントはサポートされていません。

## Azure Import/Export サービスを使用するシナリオ

ネットワーク経由でデータをアップロードまたはダウンロードすると時間がかかりすぎる場合や、追加のネットワーク帯域幅を取得すると莫大なコストがかかる場合は、Azure Import/Export サービスを使用することを検討します。

このサービスは、次のようなシナリオで使用できます。

- クラウドへのデータの移行: Azure に大量のデータを迅速にコスト効率よく移動します。
- コンテンツ配信: 顧客サイトにデータを迅速に送信します。
- バックアップ: Azure BLOB ストレージに格納するオンプレミスのデータのバックアップを作成します。
- データの回復: BLOB ストレージに格納された大量のデータを回復し、オンプレミスの場所に配信します。

## 前提条件

このセクションでは、このサービスを使用するために必要な前提条件について説明します。ドライブを発送する前に、これらの条件を慎重に確認してください。

### ストレージ アカウント

Import/Export サービスを使用するには、既存の Azure サブスクリプションと、1 つ以上の**クラシック** ストレージ アカウントが必要です。各ジョブを使用できるのは、1 つの従来のストレージ アカウントとの間でのデータ転送だけです。言い換えると、1 つのインポート/エクスポート ジョブを、複数のストレージ アカウントに対して使用することはできません。新しいストレージ アカウントの作成については、「[ストレージ アカウントの作成方法](storage-create-storage-account.md#create-a-storage-account)」を参照してください。

### BLOB の種類

Azure Import/Export サービスを使用して、データを**ブロック** BLOB または**ページ** BLOB にコピーできます。逆に言うと、このサービスを使用して Azure Storage からエクスポートできるのは、**ブロック** BLOB、**ページ** BLOB、**追加** BLOB に限られます。

### ジョブ

BLOB ストレージとの間でインポートまたはエクスポートの処理を開始するには、最初に "ジョブ" を作成します。ジョブは、"インポート ジョブ" または "エクスポート ジョブ" です。

- オンプレミスのデータを、Azure ストレージ アカウントの BLOB に転送する場合は、インポート ジョブを作成します。
- ストレージ アカウントに現在、BLOB として格納されているデータを、返送されるハード ドライブに移す場合は、エクスポート ジョブを作成します。

ジョブを作成するときは、1 台以上のハード ドライブを Azure データ センターに発送することを Import/Export サービスに通知します。

- インポート ジョブの場合、データが保存されたハード ドライブを送付します。
- エクスポート ジョブの場合、空のハード ドライブを送付します。
- ジョブごとに最大 10 台のハード ディスク ドライブを送付できます。

インポート/エクスポート ジョブは、[クラシック ポータル](https://manage.windowsazure.com/)または [Azure Storage Import/Export REST API](http://go.microsoft.com/fwlink/?LinkID=329099) を使用して作成できます。

### クライアント ツール

**インポート** ジョブを作成するときは、まず、インポート用に送付するドライブを準備します。ドライブを準備するには、ドライブをローカル サーバーに接続し、ローカル サーバーで Azure Import/Export クライアント ツールを実行する必要があります。このクライアント ツールにより、ドライブへのデータのコピー、BitLocker を使用したドライブ上のデータの暗号化、ドライブのジャーナル ファイルの生成が容易になります。

ジャーナル ファイルには、ドライブのシリアル番号やストレージ アカウント名など、ジョブとドライブに関する基本情報が保存されます。このジャーナル ファイルはドライブには保存されません。このファイルはインポート ジョブの作成時に使用されます。ジョブの作成手順の詳細については、この記事で後述します。

クライアント ツールは、64 ビット Windows オペレーティング システムとのみ互換性があります。サポートされる OS バージョンについては、「[オペレーティング システム](#operating-system)」をご覧ください。

[Azure Import/Export クライアント ツール](http://go.microsoft.com/fwlink/?LinkID=301900&clcid=0x409)の最新バージョンをダウンロードします。Azure Import/Export ツールの使用方法の詳細については、「[Azure Import/Export ツール リファレンス](http://go.microsoft.com/fwlink/?LinkId=329032)」をご覧ください。

### ハード ディスク ドライブ

Import/Export サービスで使用できるのは、3.5 インチ SATA II/III 内部ハード ドライブだけです。最大 10 TB のハード ドライブを使用できます。インポート ジョブの場合は、ドライブの最初のデータ ボリュームだけが処理されます。データ ボリュームは NTFS でフォーマットされている必要があります。データをハード ドライブにコピーするときは、SATA コネクタを使用して直接接続することも、外部 SATA II/III USB アダプターを使用して外部接続することもできます。次の外部 SATA II/III USB アダプターのいずれかを使用することをお勧めします。

- Anker 68UPSATAA-02BU
- Anker 68UPSHHDS-BU
- Startech SATADOCK22UE
- Sharkoon QuickPort XT HC

上に示した以外のコンバーターを持っている場合は、サポートされているコンバーターを購入する前に、そのコンバーターで Azure Import/Export ツールを実行してドライブの準備を試み、問題なく実行できるかどうかを確認することもできます。

> [AZURE.IMPORTANT] USB アダプターが組み込まれた外部ハード ディスク ドライブは、このサービスではサポートされていません。また、外付け HDD のケース内のディスクも使用できません。外付け HDD は送付しないでください。

### Encryption

ドライブ上のデータは、BitLocker ドライブ暗号化で暗号化する必要があります。こうすると、移送中にデータが保護されます。

インポート ジョブの場合は、2 つの方法で暗号化できます。1 つは、ドライブの準備中にクライアント ツールを実行するときに /encrypt パラメーターを使用する方法、もう 1 つは、ドライブで BitLocker 暗号化を手動で有効にし、ドライブの準備中にクライアント ツールのコマンド ラインで暗号化キーを指定する方法です。

エクスポート ジョブの場合は、データがドライブにコピーされたドライブが、サービスによって BitLocker で暗号化され、その後、返送されます。暗号化キーは、クラシック ポータルを介して提供されます。

### オペレーティング システム

Azure にドライブを送付する前、Azure Import/Export ツールを使用してハード ドライブを準備するときに、次の 64 ビット オペレーティング システムのいずれかを使用できます。

Windows 7 Enterprise、Windows 7 Ultimate、Windows 8 Pro、Windows 8 Enterprise、Windows 8.1 Pro、Windows 8.1 Enterprise、Windows 10<sup>1</sup>、Windows Server 2008 R2、Windows Server 2012、Windows Server 2012 R2。このすべてのオペレーティング システムが BitLocker ドライブ暗号化をサポートしています。

> [AZURE.IMPORTANT] <sup>1</sup>Windows 10 コンピューターを使用してハード ドライブを準備する場合は、最新バージョンの Azure Import/Export ツールをダウンロードしてください。

### 場所

Azure Import/Export サービスでは、すべてのパブリック Azure Storage アカウントとの間でのデータのコピーをサポートしています。ハード ディスク ドライブは、次のいずれかの場所に送付できます。ここに示されていないパブリック Azure の場所にストレージ アカウントが存在する場合、クラシック ポータルまたは Import/Export REST API を使用してジョブを作成するときに、別の送付先が示されます。

サポートされる送付先は次のとおりです。

- 米国東部

- 米国西部

- 米国東部 2

- 米国中央部

- 米国中北部

- 米国中南部

- 北ヨーロッパ

- 西ヨーロッパ

- 東アジア

- 東南アジア

- オーストラリア東部

- オーストラリア南東部

- 西日本

- 東日本

- インド中部


### 発送

**データ センターへのドライブの発送:**

インポート/エクスポート ジョブの作成時に、ドライブの送付先として、サポートされるいずれかの場所の送付先住所が提供されます。提供される送付先住所はストレージ アカウントの場所によって異なりますが、ストレージ アカウントの場所とは異なる場合があります。

FedEx、DHL、UPS などの運送業者や、アメリカ郵政公社を利用して、ドライブを送付先住所に発送できます。

**データ センターからのドライブの発送:**

インポート/エクスポート ジョブの作成時に、ジョブの完了後に、Microsoft がドライブを返送するときに使用する返送先住所を指定する必要があります。処理が遅れないように、必ず有効な返送先住所を指定してください。

Microsoft がドライブを返送するときに使用する FedEx または DHL の有効な運送業者アカウント番号も指定する必要があります。米国およびヨーロッパの場所からドライブを返送する場合は、FedEx アカウント番号が必要です。アジアおよびオーストラリアの場所からドライブを返送する場合は、DHL アカウント番号が必要です。[FedEx](http://www.fedex.com/us/oadr/) (米国およびヨーロッパ) または [DHL](http://www.dhl.com/) (アジアおよびオーストラリア) の運送業者アカウントがない場合は、アカウントを作成できます。運送業者アカウント番号を既に持っている場合は、その番号が有効であることを確認してください。

パッケージを発送する際には、[Microsoft Azure サービス条件](https://azure.microsoft.com/support/legal/services-terms/)の規定に従う必要があります。

> [AZURE.IMPORTANT] 発送する物理メディアが国境を越える場合があることに注意してください。お客様は、物理メディアおよびデータが輸入および輸出に関して該当する法律に準拠していることを確認する必要があります。物理メディアを発送する前に、アドバイザーに依頼して、メディアおよびデータが指定のデータ センターに合法的に発送できることを確認してもらってください。それにより、マイクロソフトへのメディアの到着が遅れるのを防ぐことができます。たとえば、国境を越える (欧州連合域内で国境を越える場合を除く) パッケージには、コマーシャル インボイスを同梱する必要があります。運送業者の Web サイトで、入力済みコマーシャル インボイスを印刷することもできます。[DHL のコマーシャル インボイス](http://invoice-template.com/wp-content/uploads/dhl-commercial-invoice-template.pdf)や [FedEx のコマーシャル インボイス](http://images.fedex.com/downloads/shared/shipdocuments/blankforms/commercialinvoice.pdf)がその例です。Microsoft が輸出者として指定されていないことを確認します。

## Azure Import/Export サービスのしくみ

Azure Import/Export サービスを使用して、オンプレミス サイトと Azure BLOB ストレージ間でデータを転送するには、ジョブを作成し、ハード ディスク ドライブを Azure データ センターに送付します。送付する各ハード ディスク ドライブは、1 つのジョブに関連付けられます。各ジョブは、1 つのストレージ アカウントに関連付けられます。[前提条件のセクション](#pre-requisites)を慎重に見直して、サポートされている BLOB の種類、ディスクの種類、場所、発送など、このサービスの詳細を確認してください。

このセクションでは、インポート/エクスポート ジョブに含まれる手順の概要を説明します。後述の「[クイック スタート](#quick-start)」セクションで、インポート/エクスポート ジョブの作成手順を説明します。

### インポート ジョブの内部

大まかに言うと、インポート ジョブには次の手順が含まれます。

- インポートするデータと必要なドライブの数を決定します。
- BLOB ストレージでデータのインポート先の BLOB を特定します。
- Azure Import/Export ツールを使用して、1 台以上のハード ディスク ドライブにデータをコピーし、そのドライブを BitLocker で暗号化します。
- クラシック ポータルまたは Import/Export REST API を使用して、ターゲット クラシック ストレージ アカウントでインポート ジョブを作成します。クラシック ポータルを使用している場合は、ドライブのジャーナル ファイルをアップロードします。
- ドライブ返送に使用する返送先住所と運送業者アカウント番号を指定します。
- ジョブの作成時に提供された送付先住所にハード ディスク ドライブを発送します。
- インポート ジョブの詳細で配送問い合わせ番号を更新し、インポート ジョブを送信します。
- ドライブが Azure データ センターに届き、処理されます。
- 運送業者アカウントを使用して、インポート ジョブで提供された返送先住所にドライブが送付されます。

	![図 1: インポート ジョブのフロー](./media/storage-import-export-service/importjob.png)


### エクスポート ジョブの内部

大まかに言うと、エクスポート ジョブには次の手順が含まれます。

- エクスポートするデータと必要なドライブの数を決定します。
- BLOB ストレージでデータのソース BLOB またはソース コンテナーのパスを特定します。
- クラシック ポータルまたは Import/Export REST API を使用して、ソース ストレージ アカウントでエクスポート ジョブを作成します。
- エクスポート ジョブでデータのソース BLOB またはソース コンテナーのパスを指定します。
- ドライブ返送に使用する返送先住所と運送業者アカウント番号を指定します。
- ジョブの作成時に提供された送付先住所にハード ディスク ドライブを発送します。
- エクスポート ジョブの詳細で配送問い合わせ番号を更新し、エクスポート ジョブを送信します。
- ドライブが Azure データ センターに届き、処理されます。
- ドライブが BitLocker で暗号化され、クラシック ポータルを介してキーが提供されます。
- 運送業者アカウントを使用して、インポート ジョブで提供された返送先住所にドライブが送付されます。

	![図 2: エクスポート ジョブのフロー](./media/storage-import-export-service/exportjob.png)

### ジョブの状態の表示

クラシック ポータルから、インポート ジョブまたはエクスポート ジョブの状態を追跡できます。クラシック ポータルで自分のストレージ アカウントに移動し、**[インポート/エクスポート]** タブをクリックします。ジョブの一覧がページに表示されます。この一覧は、ジョブの状態、ジョブ名、ジョブの種類、または問い合わせ番号でフィルター処理できます。

ドライブの処理状況に応じて、次のジョブの状態のいずれかが表示されます。

| ジョブの状態 | Description |
|:-------------|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 作成 | ジョブが作成されましたが、発送情報が入力されていません。 |
| 発送 | ジョブが作成され、発送情報が入力されています。**注**: Azure データ センターにドライブが届いても、しばらくの間、状態に引き続き "発送" と表示される場合があります。サービスでデータのコピーが開始されると、状態が "転送" に変わります。ドライブの詳しい状態を確認する必要がある場合は、Import/Export REST API を使用します。 |
| 転送 | ハード ドライブから (インポート ジョブの場合)、またはハード ドライブに (エクスポート ジョブの場合) データを転送中です。 |
| 梱包 | データの転送が完了し、返送のためにハード ドライブを準備しています。 |
| 完了 | ハード ドライブが返送されました。 |

### ジョブの処理の所要時間

インポート/エクスポート ジョブの処理にかかる時間は、運送時間、ジョブの種類、コピーするデータの種類とサイズ、用意されたディスクのサイズなど、さまざまな要素によって変わります。Import/Export サービスには SLA はありません。REST API を使用すると、ジョブの進行状況を詳細に追跡できます。ジョブの一覧表示操作には、コピーの進行状況を示す完了率パラメーターがあります。タイム クリティカルなインポート/エクスポート ジョブの推定所要時間が必要な場合は、Microsoft にお問い合わせください。

### 価格

**ドライブ処理料金**

インポート/エクスポート ジョブの一環として処理されるドライブごとにドライブ処理料金が発生します。詳細については、「[Import/Export の料金](https://azure.microsoft.com/pricing/details/storage-import-export/)」をご覧ください。

**運送費**

ドライブを Azure に発送するときに、運送業者に運送費を支払います。Microsoft からドライブが返送されるときには、ジョブの作成時に指定した運送業者アカウントに運送費が課金されます。

**トランザクション料金**

BLOB ストレージにデータをインポートするときは、トランザクション料金は発生しません。BLOB ストレージからデータをエクスポートするときは、標準の送信料金が適用されます。トランザクション料金の詳細については、「[Data Transfers (データ転送) の料金詳細](https://azure.microsoft.com/pricing/details/data-transfers/)」をご覧ください。

## クイック スタート

このセクションでは、インポート/エクスポート ジョブの作成手順を説明します。次の手順に進む前に、すべての[前提条件](#pre-requisites)を満たしていることを確認してください。

## インポート ジョブの作成方法

データが保存された 1 台以上のドライブを、指定されたデータ センターに送付することで、インポート ジョブを作成して、ハード ドライブから Azure Storage アカウントにデータをコピーします。インポート ジョブでは、ハード ディスク ドライブ、コピーするデータ、ターゲット ストレージ アカウント、および発送情報の詳細を、Azure Import/Export サービスに伝えます。インポート ジョブの作成は 3 段階のプロセスです。まず、Azure Import/Export クライアント ツールを使用してドライブを準備します。次に、クラシック ポータルを使用して、インポート ジョブを送信します。最後に、ジョブの作成時に提供された送付先住所にドライブを発送し、ジョブの詳細で発送情報を更新します。

> [AZURE.IMPORTANT] ストレージ アカウントごとにジョブを 1 つだけ送信できます。送付したドライブは、それぞれ 1 つのストレージ アカウントにインポートできます。たとえば、データを 2 つのストレージ アカウントにインポートするとします。この場合、ストレージ アカウントごとに個別のハード ディスク ドライブを使用し、ストレージ アカウントごとに個別のジョブを作成する必要があります。

### ドライブの準備

Azure Import/Export サービスを使用してデータをインポートするときは、まず、Azure Import/Export クライアント ツールを使用してドライブを準備します。次の手順に従ってドライブを準備します。

1.	インポートするデータを特定します。これは、ローカル サーバーまたはネットワーク共有上のディレクトリやスタンドアロン ファイルです。

2.	データの合計サイズに応じて、必要なドライブの数を決定します。必要な数の 3.5 インチ SATA II/III ハード ディスク ドライブを調達します。

3.	ターゲット ストレージ アカウント、コンテナー、仮想ディレクター、および BLOB を特定します。

4.	各ハード ディスク ドライブにコピーするディレクトリやスタンドアロン ファイルを決定します。

5.	[Azure Import/Export ツール](http://go.microsoft.com/fwlink/?LinkID=301900&clcid=0x409)を使用して、1 台以上のハード ドライブにデータをコピーします。

	- Azure Import/Export ツールによって、コピー セッションが作成され、ソースのデータがハード ディスク ドライブにコピーされます。1 つのコピー セッションで、1 つのディレクトリとそのサブディレクトリ、または 1 つのファイルをコピーできます。

	- ソース データが多数のディレクトリにまたがる場合は、複数のコピー セッションが必要になることがあります。

	- 準備するハード ディスク ドライブごとに、1 つ以上のコピー セッションが必要になります。

6.	/encrypt パラメーターを指定して、ハード ディスク ドライブで BitLocker 暗号化を有効にすることができます。また、ハード ディスク ドライブで BitLocker 暗号化を手動で有効にし、ツールの実行時にキーを指定することもできます。

7.	Azure Import/Export ツールにより、ドライブの準備中に各ドライブのジャーナル ファイルが生成されます。ドライブのジャーナル ファイルは、ドライブ自体ではなく、ローカル コンピューターに格納されます。インポート ジョブの作成時に、ジャーナル ファイルをアップロードします。ドライブのジャーナル ファイルには、ドライブ ID と BitLocker キーのほかに、ドライブに関するその他の情報も含まれます。**重要**: 準備したハード ディスク ドライブごとに 1 つのジャーナル ファイルが生成されます。クラシック ポータルを使用してインポート ジョブを作成するときに、そのインポート ジョブに含まれるドライブのすべてのジャーナル ファイルをアップロードする必要があります。ジャーナル ファイルのないドライブは処理されません。

8.	ディスクの準備が完了した後に、ハード ディスク ドライブのデータやジャーナル ファイルを変更しないでください。

Azure Import/Export クライアント ツールを使用してハード ディスク ドライブを準備する際のコマンドと例を以下に示します。

最初のコピー セッションでディレクトリをコピーする際に使用する、Azure Import/Export クライアント ツールの PrepImport コマンドを次に示します。

	WAImportExport PrepImport /sk:<StorageAccountKey> /csas:<ContainerSas> /t: <TargetDriveLetter> [/format] [/silentmode] [/encrypt] [/bk:<BitLockerKey>] [/logdir:<LogDirectory>] /j:<JournalFile> /id:<SessionId> /srcdir:<SourceDirectory> /dstdir:<DestinationBlobVirtualDirectory> [/Disposition:<Disposition>] [/BlobType:<BlockBlob|PageBlob>] [/PropertyFile:<PropertyFile>] [/MetadataFile:<MetadataFile>]

**例:**

次の例では、H:\\Video のすべてのファイルとサブディレクトリを、X: にマウントされたハード ディスク ドライブにコピーします。データは、ストレージ アカウント キーで指定されたコピー先ストレージ アカウントと、video/ というストレージ コンテナーにインポートされます。ストレージ コンテナーが存在しない場合は作成されます。このコマンドでは、ターゲット ハード ディスク ドライブのフォーマットと暗号化も実行されます。

	WAImportExport.exe PrepImport /j:FirstDrive.jrn /id:Video1 /logdir:c:\logs /sk:storageaccountkey /t:x /format /encrypt /srcdir:H:\Video1 /dstdir:video/ /MetadataFile:c:\WAImportExport\SampleMetadata.txt

後続のコピー セッションでディレクトリをコピーする際に使用する、Azure Import/Export クライアント ツールの PrepImport コマンドを次に示します。

	WAImportExport PrepImport /j:<JournalFile> /id:<SessionId> /srcdir:<SourceDirectory> /dstdir:<DestinationBlobVirtualDirectory> [/Disposition:<Disposition>] [/BlobType:<BlockBlob|PageBlob>] [/PropertyFile:<PropertyFile>] [/MetadataFile:<MetadataFile>]

同じハード ディスク ドライブに対する後続のコピー セッションでは、同じジャーナル ファイル名を指定し、新しいセッション ID を指定します。ストレージ アカウント キーとターゲット ドライブを再指定する必要はありません。ドライブのフォーマットと暗号化も不要です。次の例では、H:\\Photo フォルダーとそのサブディレクトリを同じターゲット ドライブの photo というストレージ コンテナーにコピーします。

	WAImportExport.exe PrepImport /j:FirstDrive.jrn /id:Photo /srcdir:H:\Photo /dstdir:photo/ /MetadataFile:c:\WAImportExport\SampleMetadata.txt

最初のコピー セッションでファイルをコピーする際に使用する、Azure Import/Export クライアント ツールの PrepImport コマンドを次に示します。

	WAImportExport PrepImport /sk:<StorageAccountKey> /csas:<ContainerSas> /t: <TargetDriveLetter> [/format] [/silentmode] [/encrypt] [/bk:<BitLockerKey>] [/logdir:<LogDirectory>] /j:<JournalFile> /id:<SessionId> /srcfile:<SourceFile> /dstblob:<DestinationBlobPath> [/Disposition:<Disposition>] [/BlobType:<BlockBlob|PageBlob>] [/PropertyFile:<PropertyFile>] [/MetadataFile:<MetadataFile>]

後続のコピー セッションでファイルをコピーする際に使用する、Azure Import/Export クライアント ツールの PrepImport コマンドを次に示します。

	WAImportExport PrepImport /j:<JournalFile> /id:<SessionId> /srcfile:<SourceFile> /dstblob:<DestinationBlobPath> [/Disposition:<Disposition>] [/BlobType:<BlockBlob|PageBlob>] [/PropertyFile:<PropertyFile>] [/MetadataFile:<MetadataFile>]

**注意**: 既定では、データはブロック BLOB としてインポートされます。/BlobType パラメーターを使用すると、データをページ BLOB としてインポートできます。たとえば、Azure VM にディスクとしてマウントされる VHD ファイルをインポートする場合は、ページ BLOB としてインポートする必要があります。使用する BLOB の種類がわからない場合は、/blobType:auto を指定すると、適切な種類を判断する際に役立ちます。この例では、すべての vhd ファイルと vhdx ファイルがページ BLOB としてインポートされ、それ以外のファイルはブロック BLOB としてインポートされます。

Azure Import/Export クライアント ツールの使用方法の詳細については、[インポートで使用するハード ドライブの準備](https://msdn.microsoft.com/library/dn529089.aspx)に関するページをご覧ください。

また、手順の詳細については、「[Sample Workflow to Prepare Hard Drives for an Import Job (インポート ジョブで使用するハード ドライブの準備 - サンプル ワークフロー)](https://msdn.microsoft.com/library/dn529097.aspx)」をご覧ください。

### インポート ジョブの作成

1.	ドライブの準備ができたら、[クラシック ポータル](https://manage.windowsazure.com)でストレージ アカウントに移動し、ダッシュボードを表示します。**[概要]** の下で **[インポート ジョブの作成]** をクリックします。手順を確認したら、ドライブの準備ができており、ドライブのジャーナル ファイルが使用可能であることを示すチェック ボックスをオンにします。

2.	ステップ 1 では、このインポート ジョブの担当者の連絡先情報と有効な返送先住所を入力します。インポート ジョブの詳細なログ データを保存する場合は、**['waimportexport' コンテナーに詳細ログを保存する]** オプションをオンにします。

3.	ステップ 2 では、ドライブの準備中に取得したドライブのジャーナル ファイルをアップロードします。準備したドライブごとに 1 つのファイルをアップロードする必要があります。

	![インポート ジョブの作成 - ステップ 3](./media/storage-import-export-service/import-job-03.png)

4.	ステップ 3 では、インポート ジョブのわかりやすい名前を入力します。名前に含めることができるのは、アルファベットの小文字、数字、ハイフン、アンダースコアだけです。また、先頭の文字はアルファベットにします。スペースを含めることはできません。ここで入力した名前を使用して、ジョブの進行中および完了後にジョブを追跡します。

	次に、データ センターのリージョンを一覧から選択します。データ センターのリージョンに、パッケージの発送先となるデータ センターとその住所が示されます。詳細については、FAQ を参照してください。

5. 	ステップ 4. で、返送に利用する宅配業者を一覧から選択し、業者のアカウント番号を入力します。マイクロソフトでは、インポート ジョブの完了後、このアカウントを使用してドライブを返送します。

	問い合わせ番号がある場合は、業者を一覧から選択し、問い合わせ番号を入力します。

	まだ問い合わせ番号がない場合は、**[パッケージの発送後、このインポート ジョブの発送情報を指定します]** を選択してから、インポート処理を完了します。

6. パッケージの発送後に問い合わせ番号を入力するには、クラシック ポータルでストレージ アカウントの **[インポート/エクスポート]** ページに戻り、一覧からジョブを選択して、**[発送情報]** をクリックします。ウィザードの指示に従い、ステップ 2. で問い合わせ番号を入力します。

	追跡番号がジョブ作成後 2 週間以内に更新されない場合、ジョブは期限切れになります。

	ジョブの状態が "作成"、"発送"、または "転送" の場合は、ウィザードのステップ 2. で宅配業者のアカウント番号を更新することもできます。ジョブの状態が "パッケージ" になると、そのジョブの宅配業者のアカウント番号は更新できません。

7. ポータルのダッシュボードでジョブの進行状況を追跡できます。前のセクションのジョブの各状態の意味については、「[ジョブの状態の表示](#viewing-your-job-status)」をご覧ください。

## エクスポート ジョブの作成方法

エクスポート ジョブを作成することで、1 台以上の空のドライブをデータ センターに発送すること、そこでストレージ アカウントからそのドライブにデータをエクスポートすること、その後そのドライブを返送してもらうことを、Import/Export サービスに通知します。

### ドライブの準備

エクスポート ジョブのドライブを準備する際には、次の事前チェックを行うことをお勧めします。

1. Azure Import/Export ツールの PreviewExport コマンドを使用して、必要なディスクの数を確認します。詳細については、「[Previewing Drive Usage for an Export Job (エクスポート ジョブのドライブ使用率のプレビュー)](https://msdn.microsoft.com/library/azure/dn722414.aspx)」をご覧ください。使用するドライブのサイズに基づいて、選択した BLOB に対するドライブの使用率をプレビューするのに役立ちます。

2. エクスポート ジョブ用に送付するハード ドライブの読み取り/書き込みが可能であることを確認します。

### エクスポート ジョブの作成

1. 	エクスポート ジョブを作成するには、[クラシック ポータル](https://manage.windowsazure.com)でストレージ アカウントに移動し、ダッシュボードを表示します。**[概要]** で **[エクスポート ジョブの作成]** をクリックし、ウィザードの指示に従って続行します。

2. 	ステップ 2. で、このエクスポート ジョブの担当者の連絡先情報を入力します。エクスポート ジョブの詳細なログ データを保存する場合は、**['waimportexport' コンテナーに詳細ログを保存する]** オプションをオンにします。

3.	ステップ 3. で、ストレージ アカウントから空のドライブにエクスポートする BLOB データを指定します。ストレージ アカウントの BLOB データをすべてエクスポートすることも、エクスポートする BLOB データまたはそのセットを指定することもできます。

	エクスポートする BLOB を指定するには、**[等しい]** セレクターを使用し、コンテナー名で始まる、BLOB への相対パスを指定します。ルート コンテナーを指定するには、"*$root*" を使用します。

	プレフィックスで始まるすべての BLOB を指定するには、**[指定値で始まる]** セレクターを使用し、スラッシュ "/" で始まるプレフィックスを指定します。プレフィックスには、コンテナー名のプレフィックス、コンテナー名全体、またはコンテナー名全体の後に BLOB 名のプレフィックスを付けた名前を指定できます。

	次の表は、有効な BLOB のパスの例を示しています。

	セレクター|BLOB パス|Description
	---|---|---
	指定値で始まる|/|ストレージ アカウントのすべての BLOB をエクスポートする
	指定値で始まる|/$root/|ルート コンテナー内のすべての BLOB をエクスポートする
	指定値で始まる|/book|プレフィックス "**book**" で始まるすべてのコンテナー内のすべての BLOB をエクスポートする
	指定値で始まる|/music/|コンテナー "**music**" 内のすべての BLOB をエクスポートする
	指定値で始まる|/music/love|コンテナー "**music**" 内の、プレフィックス "**love**" で始まるすべての BLOB をエクスポートする
	等しい|$root/logo.bmp|ルート コンテナー内の BLOB "**logo.bmp**" をエクスポートする
	等しい|videos/story.mp4|コンテナー "**videos**" 内の BLOB "**story.mp4**" をエクスポートする

	次のスクリーンショットで示すように、処理中にエラーが発生しないように、有効な形式で BLOB のパスを指定する必要があります。

	![エクスポート ジョブの作成 - ステップ 3](./media/storage-import-export-service/export-job-03.png)


4.	ステップ 4. で、エクスポート ジョブのわかりやすい名前を入力します。名前に含めることができるのは、アルファベットの小文字、数字、ハイフン、アンダースコアだけです。また、先頭の文字はアルファベットにします。スペースを含めることはできません。

	データ センターのリージョンに、パッケージの発送先となるデータ センターが示されます。詳細については、FAQ を参照してください。

5. 	ステップ 5. で、返送に利用する宅配業者を一覧から選択し、業者のアカウント番号を入力します。マイクロソフトでは、エクスポート ジョブの完了後、このアカウントを使用してドライブを返送します。

	問い合わせ番号がある場合は、業者を一覧から選択し、問い合わせ番号を入力します。

	まだ問い合わせ番号がない場合は、**[パッケージの発送後、このエクスポート ジョブの発送情報を指定します]** を選択してから、エクスポート処理を完了します。

6. パッケージの発送後に問い合わせ番号を入力するには、クラシック ポータルでストレージ アカウントの **[インポート/エクスポート]** ページに戻り、一覧からジョブを選択して、**[発送情報]** をクリックします。ウィザードの指示に従い、ステップ 2. で問い合わせ番号を入力します。

	追跡番号がジョブ作成後 2 週間以内に更新されない場合、ジョブは期限切れになります。

	ジョブの状態が "作成"、"発送"、または "転送" の場合は、ウィザードのステップ 2. で宅配業者のアカウント番号を更新することもできます。ジョブの状態が "パッケージ" になると、そのジョブの宅配業者のアカウント番号は更新できません。

	> [AZURE.NOTE] エクスポート対象の BLOB がハード ドライブへのコピー時に使用中の場合は、Azure Import/Export サービスは BLOB のスナップショットを作成してスナップショットをコピーします。

7.	クラシック ポータルのダッシュボードで、ジョブの進行状況を追跡できます。ジョブの各状態の意味については、前述の「ジョブの状態の表示」をご覧ください。

8.	エクスポートされたデータが含まれたドライブを受け取ったら、サービスによって生成されたドライブの BitLocker キーを表示し、コピーできます。クラシック ポータルで自分のストレージ アカウントに移動し、[インポート/エクスポート] タブをクリックします。一覧からエクスポート ジョブを選択し、[キーの表示] ボタンをクリックします。BitLocker キーが次のように表示されます。

	![エクスポート ジョブの BitLocker キーの表示](.\media\storage-import-export-service\export-job-bitlocker-keys.png)

このサービスを使用しているときに生じる最も一般的な質問については、次の FAQ セクションをご覧ください。

## よく寄せられる質問 ##


**ドライブがデータ センターに届いた後、データのコピーにはどのくらいの時間がかかりますか。**

コピーの所要時間は、ジョブの種類、コピーするデータの種類とサイズ、用意されたディスクのサイズ、既存のワークロードなど、さまざまな要素によって変わります。これらの要素に応じて、所要時間は数日から数週間までさまざまです。そのため、一般的な推定所要時間を示すことは困難です。サービスは、可能であれば複数のドライブを並行してコピーすることでジョブの最適化を試みます。タイム クリティカルなインポート/エクスポート ジョブがある場合、推定所要時間については Microsoft にお問い合わせください。

**どのような場合に Azure Import/Export サービスを使用すればよいですか。** Azure Import/Export サービスは、ネットワーク経由でのアップロードまたはダウンロードにかかる時間が、大まかに見積もって 8 日以上となる場合に使用することをお勧めします。アップロード/ダウンロードの所要時間は、任意のオンライン計算機を使用するか、または Azure Samples リポジトリの Azure Import Export REST API サンプルにある[データ転送速度計算機](https://github.com/Azure-Samples/storage-dotnet-import-export-job-management/blob/master/DataTransferSpeedCalculator.html)を[ダウンロード](https://github.com/Azure-Samples/storage-dotnet-import-export-job-management/archive/master.zip)すると求めることができます。計算値は厳密な値ではなく大まかな目安になります。

**Resource Manager ストレージ アカウントで Azure Import/Export サービスを使用できますか。**

いいえ。Azure Import/Export サービスを使用して、Resource Manager ストレージ アカウントとの間でデータを直接コピーすることはできません。サービスがサポートするのは、クラシック ストレージ アカウントだけです。Resource Manager ストレージ アカウントは、まもなくサポートされる予定です。代わりに、データをクラシック ストレージ アカウントにインポートし、[AzCopy](storage-use-azcopy.md) または CopyBlob を使用して、Resource Manager ストレージ アカウントに移行することができます。

**Azure Import/Export サービスを使用して Azure ファイルをコピーすることはできますか。**

いいえ。Azure Import/Export サービスがサポートするのは、ブロック BLOB とページ BLOB だけです。Azure ファイル、テーブル、キューなど、他のストレージの種類はいずれもサポートされていません。

**CSP サブスクリプションで Azure Import/Export サービスを使用できますか。**

いいえ。Azure Import/Export サービスは、CSP サブスクリプションをサポートしていません。このサポートは今後追加される予定です。

**インポート ジョブのドライブの準備手順を省略することはできますか。あるいは、コピーせずにドライブを準備することはできますか。**

データをインポートするために送付するドライブは、Azure Import/Export クライアント ツールを使用して準備する必要があります。クライアント ツールを使用して、データをドライブにコピーする必要があります。

**エクスポート ジョブを作成するときに、ディスクの準備作業を実行する必要はありますか。**

いいえ。ただし、いくつかの事前チェックをお勧めします。Azure Import/Export ツールの PreviewExport コマンドを使用して、必要なディスクの数を確認します。詳細については、「[Previewing Drive Usage for an Export Job (エクスポート ジョブのドライブ使用率のプレビュー)](https://msdn.microsoft.com/library/azure/dn722414.aspx)」をご覧ください。使用するドライブのサイズに基づいて、選択した BLOB に対するドライブの使用率をプレビューするのに役立ちます。また、エクスポート ジョブに対して発送されるハード ドライブを読み書きできることを確認します。

**サポートされる要件に適合しない HDD を誤って発送した場合は、どうなりますか。**

Azure データ センターでは、サポートされる要件に適合しないドライブは返送されます。サポートされる要件を満たすのが、パッケージ内の一部のドライブだけである場合は、それらのドライブが処理され、要件を満たさないドライブは返送されます。

**ジョブを取り消すことはできますか。**

ジョブの状態が "作成" または "発送" のときは、ジョブを取り消すことができます。

**クラシック ポータルでは、どのくらいの期間、完了したジョブの状態を確認できますか。**

完了したジョブの状態は、最大 90 日間、表示されます。90 日が経過すると、完了したジョブは削除されます。

**10 台を超えるドライブでインポートまたはエクスポートするには、どうすればよいでしょうか。**

Import/Export サービスで、1 つのインポート ジョブまたはエクスポート ジョブが参照できるのは、10 台のドライブまでです。10 台を超えるドライブを発送する必要がある場合は、複数のジョブを作成できます。同じジョブに関連付けられているドライブは、同じパッケージにまとめて発送する必要があります。

**推奨アダプターの一覧に含まれていない USB-SATA アダプターを使用することはできますか。**

上に示した以外のコンバーターを持っている場合は、サポートされているコンバーターを購入する前に、そのコンバーターで Azure Import/Export ツールを実行してドライブの準備を試み、問題なく実行できるかどうかを確認することもできます。

**ドライブは返送前にフォーマットされるのですか。**

いいえ。ドライブはすべて BitLocker で暗号化されます。

**インポート/エクスポート ジョブのドライブを Microsoft から購入できますか。**

いいえ。インポート ジョブとエクスポート ジョブの両方で、自分のドライブを発送する必要があります。

**インポート ジョブの完了後、ストレージ アカウント内でデータはどのような状態になりますか。 ディレクトリ階層は保持されますか。**

インポート ジョブのハード ドライブを準備するときに、/dstdir: パラメーターでコピー先が指定されます。これは、ハード ドライブのデータのコピー先となるストレージ アカウント内のコピー先コンテナーです。このコピー先コンテナー内に、ハード ドライブのフォルダーの仮想ディレクトリが作成され、ファイルの BLOB が作成されます。

**ストレージ アカウント内に既に存在するファイルがドライブに含まれている場合、ストレージ アカウント内の既存の BLOB が上書きされるのでしょうか。**

ドライブを準備するときに、/Disposition:<rename|no-overwrite|overwrite> というパラメーターを使用して、コピー先のファイルを上書きするか無視するかを指定できます。既定では、既存の BLOB は上書きされず、新しいファイルの名前が変更されます。

**Azure Import/Export クライアント ツールは、32 ビット オペレーティング システムと互換性がありますか。** いいえ。クライアント ツールが対応しているのは、64 ビット Windows オペレーティング システムだけです。サポートされる OS バージョンの一覧については、「[前提条件](#pre-requisites)」の「オペレーティング システム」セクションをご覧ください。

**ハード ディスク ドライブ以外のものをパッケージに含める必要はありますか。**

ハード ドライブのみを発送してください。電源ケーブルや USB ケーブルなどは同梱しないでください。

**FedEx や DHL を利用してドライブを発送する必要がありますか。**

FedEx、DHL、UPS などの既知の運送業者や、アメリカ郵政公社を利用してデータ センターにドライブを発送できます。ただし、データ センターからドライブを返送するために、米国および EU リージョンでは FedEx アカウント番号を、アジアおよびオーストラリア リージョンでは DHL アカウント番号を指定する必要があります。

**ドライブを海外発送する場合、何か制限はありますか。**

発送する物理メディアが国境を越える場合があることに注意してください。お客様は、物理メディアおよびデータが輸入および輸出に関して該当する法律に準拠していることを確認する必要があります。物理メディアを発送する前に、アドバイザーに依頼して、メディアおよびデータが指定のデータ センターに合法的に発送できることを確認してもらってください。それにより、マイクロソフトへのメディアの到着が遅れるのを防ぐことができます。

**ジョブの作成時に、ストレージ アカウントの場所とは異なる場所が送付先住所として提供されました。どうすればよいですか。**

一部のストレージ アカウントの場所は、別の送付先にマップされています。以前に利用できた送付先が、一時的に別の場所にマップされている場合もあります。ドライブを発送する前に、ジョブの作成時に提供された送付先住所を必ず確認してください。

**運送業者の Web サイトにパッケージが配送済みであることが示されているときに、クラシック ポータルでジョブの状態が "発送" になっているのはなぜですか。**

クラシック ポータルの状態は、ドライブの処理が開始されたときに "発送" から "転送" に変わります。ドライブが施設に到着していても、処理が開始されていない場合、ジョブの状態は "発送" と表示されます。

**ドライブを発送するときに、運送業者からデータ センターの連絡先の名前と電話番号を求められました。何を提供すればよいですか。**

電話番号はジョブの作成時に提供されます。連絡先の名前が必要な場合は、waimportexport@microsoft.com までお問い合わせください。

**Azure Import/Export サービスを使用して、PST メールボックスと SharePoint データを O365 にコピーすることはできますか。**

[Office 365 への PST ファイルまたは SharePoint データのインポート](https://technet.microsoft.com/library/ms.o365.cc.ingestionhelp.aspx)に関する記事をご覧ください。

**Azure Import/Export サービスを使用して、Azure Backup サービスにバックアップをオフラインでコピーすることはできますか。**

「[Azure Backup でのオフライン バックアップのワークフロー](../backup/backup-azure-backup-import-export.md)」をご覧ください。

## 関連項目:

- [Azure Import/Export クライアント ツールの設定](https://msdn.microsoft.com/library/dn529112.aspx)

- [AzCopy コマンド ライン ユーティリティを使ったデータの転送](storage-use-azcopy.md)

- [Azure Import Export REST API サンプル](https://azure.microsoft.com/documentation/samples/storage-dotnet-import-export-job-management/)

<!---HONumber=AcomDC_0921_2016-->